---
source: crates/automapper-generator/tests/condition_codegen_tests.rs
expression: stable_output
---
// <auto-generated>
// Generated by automapper-generator generate-conditions
// AHB: test_ahb.xml
// Generated: 2026-02-18T00:00:00Z
// </auto-generated>

use crate::eval::{ConditionEvaluator, ConditionResult, EvaluationContext};

/// Generated condition evaluator for UTILMD FV2510.
pub struct UtilmdConditionEvaluatorFV2510 {
    // External condition IDs that require runtime context.
    external_conditions: std::collections::HashSet<u32>,
}

impl Default for UtilmdConditionEvaluatorFV2510 {
    fn default() -> Self {
        let mut external_conditions = std::collections::HashSet::new();
        external_conditions.insert(1);
        Self { external_conditions }
    }
}

impl ConditionEvaluator for UtilmdConditionEvaluatorFV2510 {
    fn message_type(&self) -> &str {
        "UTILMD"
    }

    fn format_version(&self) -> &str {
        "FV2510"
    }

    fn evaluate(&self, condition: u32, ctx: &EvaluationContext) -> ConditionResult {
        match condition {
            1 => self.evaluate_1(ctx),
            2 => self.evaluate_2(ctx),
            99 => self.evaluate_99(ctx),
            100 => self.evaluate_100(ctx),
            _ => ConditionResult::Unknown,
        }
    }

    fn is_external(&self, condition: u32) -> bool {
        self.external_conditions.contains(&condition)
    }
}

impl UtilmdConditionEvaluatorFV2510 {
    /// [1] Wenn Aufteilung vorhanden
    /// EXTERNAL: Requires context from outside the message.
    /// Referenced by:
    /// - SG8/SEQ (Muss [1])
    fn evaluate_1(&self, ctx: &EvaluationContext) -> ConditionResult {
        ctx.external.evaluate("message_splitting")
    }

    /// [2] Wenn Marktlokation vorhanden
    fn evaluate_2(&self, ctx: &EvaluationContext) -> ConditionResult {
        if ctx.transaktion.marktlokationen.is_empty() {
            ConditionResult::False
        } else {
            ConditionResult::True
        }
    }

    /// [99] Komplexe Bedingung
    // REVIEW: Needs review (medium confidence)
    fn evaluate_99(&self, ctx: &EvaluationContext) -> ConditionResult {
        ConditionResult::Unknown
    }

    /// [100] Sehr komplexe Bedingung
    fn evaluate_100(&self, ctx: &EvaluationContext) -> ConditionResult {
        // TODO: Condition [100] requires manual implementation
        // Reason: Too complex for auto-generation
        ConditionResult::Unknown
    }

}
